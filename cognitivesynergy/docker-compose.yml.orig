version: '3'
services:
  ona:
    build:
      context: ./ONA
      dockerfile: Dockerfile
    image: ona 
    container_name: ONA
    restart: unless-stopped

  hybridaiobjectdetection:
    depends_on: 
      - ona
    build: 
      context: .
      dockerfile: Dockerfile
    image: cognitivesynergybase 
    container_name: hybridaiobjectdetection
    volumes:
      - .:/app
      - /var/run/docker.sock:/var/run/docker.sock
    command: python3 main_detection.py
    # in order to be able to print to console and insert sleep or wait, we need the equivalent of -i interactive and -t tty
    stdin_open: true
    tty: true

  hybridaiobjecttracking:
    depends_on: 
      - ona
    build: 
      context: .
      dockerfile: Dockerfile
    image: cognitivesynergybase 
    container_name: hybridaiobjecttracking
    volumes:
      - .:/app
    command: python main_tracking.py

  hybridaistreamingtext:
    depends_on: 
      - ona
    build: .
    volumes:
      - .:/app
    command: python main_text.py
  hybridainetworking:
    depends_on: 
      - ona
    build: .
    volumes:
      - .:/app
    command: python main_networking.py
